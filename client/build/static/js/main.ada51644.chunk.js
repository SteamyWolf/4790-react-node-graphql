(this["webpackJsonpip-address-node-react"]=this["webpackJsonpip-address-node-react"]||[]).push([[0],{281:function(e,t,n){},282:function(e,t,n){},511:function(e,t,n){"use strict";n.r(t);var a,c,i,r,o=n(0),s=n.n(o),l=n(15),d=n.n(l),j=(n(281),n(282),n(542)),u=n(544),b=n(145),O=n(545),h=n(539),x=n(72),p=n(3),g=Object(h.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1},button:{textDecoration:"none",color:"white"},colors:{color:"green"}}})),v=function(e){var t=g();return Object(p.jsx)("div",{children:Object(p.jsx)(j.a,{position:"static",children:Object(p.jsxs)(u.a,{children:[Object(p.jsx)(b.a,{variant:"h6",className:t.title,children:Object(p.jsx)(x.b,{to:"/",className:t.button,children:"IP Addresses"})}),Object(p.jsx)(O.a,{children:Object(p.jsx)(x.b,{to:"/favorites",className:t.button,children:"Favorites"})}),Object(p.jsx)(O.a,{children:Object(p.jsx)(x.b,{to:"/locations",className:t.button,children:"Locations"})})]})})})},f=n(47),m=n.n(f),y=n(73),w=n(19),C=n(74),I=n.n(C),N=n(557),k=n(546),F=n(547),z=n(548),S=n(549),_=n(550),D=n(551),L=n(558),E=n(552),M=n(553),T=n(135),P=n.n(T),q=n(134),A=n.n(q),V=n(136),$=n.n(V),B=n(137),G=n.n(B),R=n(138),J=n.n(R),W=n(261),Y=n.n(W),Q=n(260),U=n.n(Q),Z=Object(h.a)((function(e){return{card:{width:"500px",margin:"0 auto",marginTop:30},avatar:{backgroundColor:"white"},error:{color:"red"},success:{color:"green"}}})),H=function(e){var t=e.data,n=e.saveToFavorites,a=e.errorMsg,c=e.favorited,i=Z(),r=t;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(k.a,{className:i.card,children:[Object(p.jsx)(F.a,{children:Object(p.jsxs)(z.a,{children:[Object(p.jsxs)(b.a,{gutterBottom:!0,variant:"h5",component:"h2",children:["IP: ",Object(p.jsx)("b",{children:r.query})]}),Object(p.jsxs)(S.a,{children:[Object(p.jsxs)(_.a,{children:[Object(p.jsx)(D.a,{children:Object(p.jsx)(L.a,{className:i.avatar,children:Object(p.jsx)(A.a,{style:{fill:"blue"}})})}),Object(p.jsx)(E.a,{children:r.country})]}),Object(p.jsxs)(_.a,{children:[Object(p.jsx)(D.a,{children:Object(p.jsx)(L.a,{className:i.avatar,children:Object(p.jsx)(P.a,{color:"secondary"})})}),Object(p.jsx)(E.a,{children:r.city})]}),Object(p.jsxs)(_.a,{children:[Object(p.jsx)(D.a,{children:Object(p.jsx)(L.a,{className:i.avatar,children:Object(p.jsx)($.a,{style:{fill:"green"}})})}),Object(p.jsx)(E.a,{children:r.regionName})]}),Object(p.jsxs)(_.a,{children:[Object(p.jsx)(D.a,{children:Object(p.jsx)(L.a,{className:i.avatar,children:Object(p.jsx)(G.a,{style:{fill:"orange"}})})}),Object(p.jsx)(E.a,{children:r.timezone})]}),Object(p.jsxs)(_.a,{children:[Object(p.jsx)(D.a,{children:Object(p.jsx)(L.a,{className:i.avatar,children:Object(p.jsx)(J.a,{style:{fill:"purple"}})})}),Object(p.jsx)(E.a,{children:r.org})]})]})]})}),Object(p.jsxs)(M.a,{children:[Object(p.jsx)(O.a,{size:"small",color:"primary",variant:"contained",startIcon:c?Object(p.jsx)(U.a,{}):Object(p.jsx)(Y.a,{}),disabled:c,onClick:n,children:"Save to Favorites"}),c?Object(p.jsx)("p",{className:i.success,children:"Successfully Saved to Favorites!"}):a?Object(p.jsx)("p",{className:i.error,children:a}):null]})]})})},K=n(554),X=Object(h.a)((function(e){return{card:{width:"500px",margin:"0 auto",marginTop:30},avatar:{backgroundColor:"white"},form:{margin:"0 auto",width:"200px",marginTop:30},buttonDiv:{width:"100%",marginTop:10,textAlign:"center"},textField:{width:"100%"},red:{color:"crimson"}}})),ee=function(){var e=X(),t=Object(o.useState)({}),n=Object(w.a)(t,2),a=n[0],c=n[1],i=Object(o.useState)(""),r=Object(w.a)(i,2),s=r[0],l=r[1],d=Object(o.useState)(!1),j=Object(w.a)(d,2),u=j[0],b=j[1],h=Object(o.useState)(!1),x=Object(w.a)(h,2),g=x[0],v=x[1],f=Object(o.useState)(""),C=Object(w.a)(f,2),k=C[0],F=C[1],z=Object(o.useState)(""),S=Object(w.a)(z,2),_=S[0],D=S[1],L=function(){var e=Object(y.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),v(!1),D(""),e.prev=3,e.next=6,I.a.get("https://ip-address-app-wyatt.herokuapp.com/location/".concat(s));case 6:if(t=e.sent,console.log(t.data),"fail"!==t.data.status){e.next=12;break}return D(t.data.message),b(!1),e.abrupt("return");case 12:c(t.data),F(""),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0);case 19:b(!1);case 20:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(y.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,""===a.org&&(b(!1),F("Organization Required")),e.next=5,I.a.post("https://ip-address-app-wyatt.herokuapp.com/location/saveLocation",{ip:a.query,country:a.country,city:a.city,region:a.regionName,timezone:a.timezone,organization:a.org});case 5:t=e.sent,console.log(t),v(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),v(!1);case 14:b(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[u?Object(p.jsx)(K.a,{}):null,_?Object(p.jsx)("div",{className:e.red,children:_}):null,Object(p.jsxs)("form",{className:e.form,children:[Object(p.jsx)(N.a,{className:e.textField,placeholder:"Enter IP Address here",value:s,onChange:function(e){return l(e.target.value)}}),Object(p.jsx)("div",{className:e.buttonDiv,children:Object(p.jsx)(O.a,{color:"primary",variant:"contained",onClick:L,disabled:!s,children:"Enter"})})]}),a&&Object.keys(a).length>0&&a.constructor===Object?Object(p.jsx)(H,{data:a,saveToFavorites:E,errorMsg:k,favorited:g}):null]})},te=n(20),ne=n(36),ae=n(18),ce=n(555),ie=n(140),re=n.n(ie),oe=n(139),se=n.n(oe),le=n(262),de=n.n(le),je=Object(h.a)((function(e){return{ipData:{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly"},card:{width:"500px",margin:"0 auto",marginTop:30,position:"relative"},editIcon:{zIndex:1,position:"absolute",top:0,right:0},avatar:{backgroundColor:"white"},form:{margin:"0 auto",width:"200px"},buttonDiv:{width:"100%",marginTop:10,textAlign:"center"},textField:{width:"100%"},textFieldCenter:{display:"flex",alignItems:"center"}}})),ue=function(){var e=je(),t=Object(o.useState)([]),n=Object(w.a)(t,2),a=n[0],c=n[1],i=Object(o.useState)(!1),r=Object(w.a)(i,2),s=(r[0],r[1]),l=Object(o.useState)(!1),d=Object(w.a)(l,2),j=d[0],u=d[1],h=Object(o.useState)({ip:"",country:"",city:"",region:"",timezone:"",organization:""}),x=Object(w.a)(h,2),g=x[0],v=x[1],f=function(){var e=Object(y.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,I.a.get("https://ip-address-app-wyatt.herokuapp.com/location/favorites");case 4:t=e.sent,n=t.data.map((function(e){return Object(ae.a)({editing:!1},e)})),c(n),u(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){f()}),[]);var C=function(){var e=Object(y.a)(m.a.mark((function e(t){var n,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,I.a.delete("https://ip-address-app-wyatt.herokuapp.com/location/delete/".concat(t));case 3:n=e.sent,i=a.findIndex((function(e){return e._id===n.data._id})),1===a.length?c([]):(a.splice(i,1),c(a)),s(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(y.a)(m.a.mark((function e(t){var n,i,r,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.put("https://ip-address-app-wyatt.herokuapp.com/location/put",g);case 2:n=e.sent,i=a.find((function(e){return e._id===t})),r=a.findIndex((function(e){return e._id===i._id})),o=Object(ne.a)(a),s=Object(ae.a)({editing:!1},n.data),o.splice(r,1,s),c(o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e,t,n){"ip"===t?v(Object(ae.a)(Object(ae.a)({},g),{},{ip:e.target.value})):"country"===t?v(Object(ae.a)(Object(ae.a)({},g),{},{country:e.target.value})):"city"===t?v(Object(ae.a)(Object(ae.a)({},g),{},{city:e.target.value})):"region"===t?v(Object(ae.a)(Object(ae.a)({},g),{},{region:e.target.value})):"timezone"===t?v(Object(ae.a)(Object(ae.a)({},g),{},{timezone:e.target.value})):"organization"===t?v(Object(ae.a)(Object(ae.a)({},g),{},{organization:e.target.value})):console.log("ERROR!!!")};return Object(p.jsxs)(p.Fragment,{children:[j?Object(p.jsx)("div",{className:"test",children:Object(p.jsx)(K.a,{})}):null,a.length<1?Object(p.jsx)("div",{children:"You have no saved favorites. Go save some!"}):Object(p.jsx)("div",{className:e.ipData,children:a.map((function(t){return Object(p.jsxs)(k.a,{className:e.card,children:[Object(p.jsx)(ce.a,{className:e.editIcon,onClick:function(){return function(e){var t=a.find((function(t){return t._id===e}));v(t),t.editing=!t.editing;var n=a.findIndex((function(e){return e._id===t._id})),i=Object(ne.a)(a);i.splice(n,1,t),c(i)}(t._id)},children:Object(p.jsx)(se.a,{})}),Object(p.jsx)(F.a,{children:Object(p.jsxs)(z.a,{children:[Object(p.jsx)(b.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.editing?Object(p.jsxs)("div",{className:e.textFieldCenter,children:["IP: ",Object(p.jsx)(N.a,{type:"text",defaultValue:t.ip,variant:"outlined",onChange:function(e){return q(e,"ip",t._id)}})]}):Object(p.jsxs)("div",{children:["IP: ",Object(p.jsx)("b",{children:t.ip})]})}),Object(p.jsxs)(S.a,{children:[Object(p.jsxs)(_.a,{children:[Object(p.jsx)(D.a,{children:Object(p.jsx)(L.a,{className:e.avatar,children:Object(p.jsx)(A.a,{style:{fill:"blue"}})})}),Object(p.jsx)(E.a,{children:t.editing?Object(p.jsx)("div",{children:Object(p.jsx)(N.a,{variant:"outlined",defaultValue:t.country,onChange:function(e){return q(e,"country",t._id)}})}):t.country})]}),Object(p.jsxs)(_.a,{children:[Object(p.jsx)(D.a,{children:Object(p.jsx)(L.a,{className:e.avatar,children:Object(p.jsx)(P.a,{color:"secondary"})})}),Object(p.jsx)(E.a,{children:t.editing?Object(p.jsx)("div",{children:Object(p.jsx)(N.a,{variant:"outlined",defaultValue:t.city,onChange:function(e){return q(e,"city",t._id)}})}):t.city})]}),Object(p.jsxs)(_.a,{children:[Object(p.jsx)(D.a,{children:Object(p.jsx)(L.a,{className:e.avatar,children:Object(p.jsx)($.a,{style:{fill:"green"}})})}),Object(p.jsx)(E.a,{children:t.editing?Object(p.jsx)("div",{children:Object(p.jsx)(N.a,{variant:"outlined",defaultValue:t.region,onChange:function(e){return q(e,"region",t._id)}})}):t.region})]}),Object(p.jsxs)(_.a,{children:[Object(p.jsx)(D.a,{children:Object(p.jsx)(L.a,{className:e.avatar,children:Object(p.jsx)(G.a,{style:{fill:"orange"}})})}),Object(p.jsx)(E.a,{children:t.editing?Object(p.jsx)("div",{children:Object(p.jsx)(N.a,{variant:"outlined",defaultValue:t.timezone,onChange:function(e){return q(e,"timezone",t._id)}})}):t.timezone})]}),Object(p.jsxs)(_.a,{children:[Object(p.jsx)(D.a,{children:Object(p.jsx)(L.a,{className:e.avatar,children:Object(p.jsx)(J.a,{style:{fill:"purple"}})})}),Object(p.jsx)(E.a,{children:t.editing?Object(p.jsx)("div",{children:Object(p.jsx)(N.a,{variant:"outlined",defaultValue:t.organization,onChange:function(e){return q(e,"organization",t._id)}})}):t.organization})]})]})]})}),Object(p.jsx)(M.a,{children:t.editing?Object(p.jsx)(O.a,{size:"small",color:"primary",variant:"contained",startIcon:Object(p.jsx)(de.a,{}),onClick:function(){return T(t._id)},children:"Save Changes"}):Object(p.jsx)(O.a,{size:"small",color:"secondary",variant:"contained",startIcon:Object(p.jsx)(re.a,{}),onClick:function(){return C(t._id)},children:"Delete"})})]},t._id)}))})]})},be=Object(o.createContext)(),Oe=function(e){var t=Object(o.useState)({}),n=Object(w.a)(t,1)[0];return Object(p.jsx)(be.Provider,{value:{ipAddressData:n},children:e.children})},he=n(263),xe=n(102),pe=n(556),ge=n(42),ve=n(143),fe=Object(ve.withScriptjs)(Object(ve.withGoogleMap)((function(e){var t=e.location;return Object(p.jsx)(ve.GoogleMap,{defaultZoom:0===t.coordinates.length?1:10,defaultCenter:{lat:parseFloat(0===t.coordinates.length?1:t.coordinates[0].latitude),lng:parseFloat(0===t.coordinates.length?1:t.coordinates[0].longitude)}})}))),me=Object(h.a)((function(e){return{locationsMain:{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly"},card:{width:"400px",margin:"30px 20px",position:"relative"},cardContent:{position:"relative"},editIcon:{zIndex:1,position:"absolute",top:0,right:0},avatar:{backgroundColor:"white"},form:{margin:"0 auto",width:"200px"},buttonDiv:{width:"100%",marginTop:10,textAlign:"center"},textField:{width:"100%"},textFieldCenter:{display:"flex",alignItems:"center"},deleteIconDiv:{position:"absolute",right:10,bottom:4,cursor:"pointer"},actionArea:{position:"relative"}}})),ye=Object(ge.gql)(a||(a=Object(xe.a)(["\n    query {\n        allLocations {\n            id\n            name\n            description\n            coordinates {\n              id\n              longitude\n              latitude\n            }\n          }\n    }\n"]))),we=Object(ge.gql)(c||(c=Object(xe.a)(["\n    mutation updateCoordinate($id: Int!, $data: CoordinateCreateInput!) {\n        updateCoordinate(id: $id, data: $data) {\n            id\n            latitude\n            longitude\n        }\n    }\n"]))),Ce=Object(ge.gql)(i||(i=Object(xe.a)(["\n    mutation deleteLocation($id: Int!) {\n        deleteLocation(id: $id) {\n            id\n            name\n        }\n    }\n"]))),Ie=Object(ge.gql)(r||(r=Object(xe.a)(["\n    mutation deleteCoordinate($id: Int!) {\n        deleteCoordinate(id: $id) {\n            id\n            latitude\n            longitude\n        }\n    }\n"]))),Ne=function(){var e=me(),t=Object(o.useState)([]),n=Object(w.a)(t,2),a=n[0],c=n[1],i=Object(ge.useMutation)(we),r=Object(w.a)(i,1)[0],s=Object(ge.useMutation)(Ce),l=Object(w.a)(s,1)[0],d=Object(ge.useMutation)(Ie),j=Object(w.a)(d,1)[0],u=Object(ge.useQuery)(ye),h=u.loading,x=u.error,g=u.data;h&&console.log("Currently Loading",h),x&&console.log("error",x);var v=function(e){if(!e){var t=g.allLocations.map((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{editing:!1})}));c(t),console.log(a)}};Object(o.useEffect)((function(){v(h)}),[h]);var f=function(e){console.log(e),console.log("clicked onEdit");var t=a.find((function(t){return t.id===e.id}));t.editing=!t.editing;var n=a.findIndex((function(e){return e.id===t.id})),i=Object(ne.a)(a);i.splice(n,1,t),c(i)};return Object(p.jsx)(p.Fragment,{children:0===a.length?Object(p.jsx)("div",{children:"Loading Data..."}):Object(p.jsx)("div",{className:e.locationsMain,children:a.map((function(t){return Object(p.jsxs)(k.a,{className:e.card,children:[Object(p.jsxs)(F.a,{children:[Object(p.jsx)(pe.a,{children:Object(p.jsx)(fe,{googleMapURL:"https:////maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key",location:t,loadingElement:Object(p.jsx)("div",{style:{height:"100%"}}),containerElement:Object(p.jsx)("div",{style:{height:"400px"}}),mapElement:Object(p.jsx)("div",{style:{height:"100%"}})})}),Object(p.jsxs)(z.a,{className:e.cardContent,children:[Object(p.jsx)(b.a,{gutterBottom:!0,variant:"h5",comppnent:"h2",children:t.name}),Object(p.jsx)(b.a,{children:t.description}),Object(p.jsxs)("form",{onSubmit:function(e){return function(e,t){e.preventDefault(),0===t.coordinates.length&&console.log(e),t.editing=!1;var n,i=new FormData(e.target),o=[],s=Object(he.a)(i.entries());try{for(s.s();!(n=s.n()).done;){var l=Object(w.a)(n.value,2),d=l[0],j=l[1];if("latitude"===d){var u={latitude:j};o.push(u)}else if("longitude"===d){var b={longitude:j};o.push(b)}}}catch(I){s.e(I)}finally{s.f()}for(var O=[],h=0;h<o.length;h++){var x=e.target[h].attributes[2].value;O.push(Object(ae.a)(Object(ae.a)({},o[h]),{},{id:x}))}var p=Object(ae.a)({},t),g=[];p.coordinates.forEach((function(e){var t=O.filter((function(t){return e.id===parseInt(t.id)})),n=Object(ae.a)(Object(ae.a)({},t[0]),t[1]);g.push(n)}));var f=g.map((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{id:parseInt(e.id)})}));console.log(f),f.forEach((function(e){r({variables:{id:e.id,data:{longitude:e.longitude,latitude:e.latitude}}})})),v(!1);var m=Object(ae.a)(Object(ae.a)({},t),{},{coordinates:f}),y=a.findIndex((function(e){return e.id===m.id})),C=Object(ne.a)(a);C.splice(y,1,m),c(C)}(e,t)},children:[0===t.coordinates.length?Object(p.jsxs)("p",{children:["You must add a coordinate to display the map correctly.",Object(p.jsx)("br",{})," (In progress)"]}):t.coordinates.map((function(e){return Object(p.jsxs)(b.a,{variant:"body2",color:"textSecondary",component:"div",children:[Object(p.jsxs)("div",{children:["Latitude: ",t.editing?Object(p.jsx)("input",{type:"text",name:"latitude",data:e.id,defaultValue:e.latitude}):e.latitude]}),Object(p.jsxs)("div",{children:["Longitude: ",t.editing?Object(p.jsx)("input",{type:"text",name:"longitude",data:e.id,defaultValue:e.longitude}):e.longitude]}),Object(p.jsx)("hr",{})]},e.id)})),t.editing?Object(p.jsxs)("div",{children:[Object(p.jsx)(O.a,{color:"primary",variant:"contained",type:"submit",children:"Save"}),Object(p.jsx)(O.a,{variant:"contained",onClick:function(){return f(t)},children:"Cancel"})]}):null]}),0===t.coordinates.length?null:Object(p.jsx)(ce.a,{className:e.editIcon,onClick:function(){return f(t)},children:Object(p.jsx)(se.a,{})})]})]}),Object(p.jsx)(M.a,{children:Object(p.jsx)("div",{class:e.deleteIconDiv,children:Object(p.jsx)(re.a,{onClick:function(){return function(e){if(e.coordinates.length>0){var t=e.coordinates.map((function(e){return j({variables:{id:e.id}})}));Promise.all(t).then((function(t){l({variables:{id:e.id}})}))}else l({variables:{id:e.id}});var n=a.findIndex((function(t){return t.id===e.id})),i=Object(ne.a)(a);i.splice(n,1),c(i)}(t)}})})})]},t.id)}))})})},ke=function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)(v,{}),Object(p.jsx)(Oe,{children:Object(p.jsxs)(te.c,{children:[Object(p.jsx)(te.a,{path:"/favorites",component:ue}),Object(p.jsx)(te.a,{path:"/locations",component:Ne}),Object(p.jsx)(te.a,{path:"/",exact:!0,component:ee})]})})]})},Fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,560)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))},ze=new ge.ApolloClient({uri:"http://localhost:4000/graphql/",cache:new ge.InMemoryCache});d.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(x.a,{children:Object(p.jsx)(ge.ApolloProvider,{client:ze,children:Object(p.jsx)(ke,{})})})}),document.getElementById("root")),Fe()}},[[511,1,2]]]);
//# sourceMappingURL=main.ada51644.chunk.js.map